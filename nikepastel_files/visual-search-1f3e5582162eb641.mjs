(self.modernJsonp=self.modernJsonp||[]).push([["91533"],{345463:function(e,t,a){a.r(t),a.d(t,{default:()=>l});let i={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:o=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MobileFlashlightPageFetchData_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:o,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"7cd65bb908c0282c47af2a2dc30819668fdb6b1e8614019a84c0ea7e8c4cad07",metadata:{},name:"MobileFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}};i.hash="a0953a7ea15ce447a2452bbeca8586ba";let l=i;var n,o,r,s=i.default||i;if("query"===s.params.operationKind)if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(s);else{let e=[s.params.name,s.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[e]=s}},807352:function(e,t,a){a.r(t),a.d(t,{default:()=>l});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchData_pin",selections:[{args:null,kind:"FragmentSpread",name:"MobileFlashlightPage_pin"}],type:"Pin",abstractKey:null};i.hash="df8cf9d2521b1a82156cc4ecd7b04884";let l=i},272636:function(e,t,a){a.r(t),a.d(t,{default:()=>l});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPage_pin",selections:[{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="a4c8c4488bd813d69ca9e96072e3d2d7";let l=i},189039:function(e,t,a){a.r(t),a.d(t,{default:()=>l});let i={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"StructuredFeedStoryModule_story",selections:[{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"location",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"containerType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contentIds",storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"componentType",storageKey:null},{alias:null,args:null,concreteType:"StoryContentDynamicJustify",kind:"LinkedField",name:"dynamicJustifyContent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"narrowView",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wideView",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"CarouselModule_story"},{args:null,kind:"FragmentSpread",name:"HeaderModule_story"}],type:"Story",abstractKey:null};i.hash="89000b08539b2d49298d8c3af31ee2f4";let l=i},573631:function(e,t,a){a.d(t,{G:()=>s,b:()=>c});var i=a(281098),l=a(667294),n=a(312048),o=a(785893);let r=(0,l.createContext)(!0);function s({children:e}){(0,l.useEffect)(()=>{(0,i.Z)("InitialPageContext","/app/packages/InitialPageContext.tsx")},[]);let t=(0,n.TH)(),a=(0,l.useRef)(t).current===t;return(0,o.jsx)(r,{value:a,children:e})}function c(){return(0,l.useContext)(r)}},530848:function(e,t,a){a.d(t,{Z:()=>c});var i=a(281098),l=a(667294),n=a(20256),o=a(93966),r=a(785893);function s(){return(0,l.useEffect)(()=>{(0,i.Z)("EmptyItemRep","/app/packages/StructuredFeed/ItemReps/utils/EmptyItemRep.tsx")},[]),(0,r.jsx)(n.xu,{width:o.yF})}function c(){return(0,l.useEffect)(()=>{(0,i.Z)("EmptyItemRepList","/app/packages/StructuredFeed/ItemReps/utils/EmptyItemRepList.tsx")},[]),(0,r.jsx)(l.Fragment,{children:Array(12).fill(void 0).map((e,t)=>(0,r.jsx)(s,{},t))})}},730378:function(e,t,a){a.d(t,{Z:()=>c});var i=a(281098),l=a(667294),n=a(20256),o=a(452918),r=a(785893);let s=new Map([["pin",4],["explorearticle",2]]);function c({children:e,itemType:t,overrideMarginBottom:a}){return(0,l.useEffect)(()=>{(0,i.Z)("StructuredFeedElementWrapper","/app/packages/StructuredFeed/ItemReps/utils/StructuredFeedElementWrapper.tsx")},[]),(0,r.jsx)(n.xu,{marginBottom:a??s.get(t)??o.mT,children:e})}},62291:function(e,t,a){a.r(t),a.d(t,{default:()=>es});var i,l=a(281098),n=a(667294);a(167912);var o=a(20256),r=a(761578),s=a(28427),c=a(351607),d=a(431870),u=a(932088),p=a(93966),h=a(385292),g=a(480818),m=a(774937),y=a(452918),f=a(207729),_=a(785893);let x=()=>(0,_.jsx)(o.xu,{color:"secondary",height:p.yF,width:p.yF}),w={1:{itemRep:g.Z,deprecatedActionShape:"square",deprecatedGetActionImage:e=>e.images?.orig?.url||""},4:{itemRep:h.Z,deprecatedActionShape:"circle",deprecatedGetActionImage:e=>e.images?.orig?.url||""},2:{itemRep:m.Z,deprecatedActionShape:"circle",deprecatedGetActionImage:e=>e.image_large_url}};function b({auxData:e,componentFallback:t,showExpanded:a=!0,story:i,view:r,viewParameter:s}){(0,n.useEffect)(()=>{(0,l.Z)("FreeformModule","/app/packages/StructuredFeed/ModuleReps/FreeformModule/FreeformModule.tsx")},[]);let c=(w[(i.display_options?.content_display||{}).model_type]||y.g5).itemRep||x,d=i.display_options?.content_display?.component_type??t;return(0,_.jsx)(o.xu,{marginBottom:2,children:(0,_.jsxs)(o.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",children:[i.title&&(0,_.jsx)(f.Z,{showExpanded:a,storyKey:{type:"Legacy",data:i}}),(0,_.jsx)(o.kC,{gap:2,justifyContent:"center",wrap:!0,children:i.objects?.map(function(t,a){return(0,_.jsx)(c,{auxData:e,component:d,imagePlaceholderColor:"rgba(0, 0, 0, 0)",index:a,item:t,story:i,view:r,viewParameter:s},a)})})]})})}var S=a(757947),v=a(530848),j=a(478047),k=a(730378),T=a(467925),C=a(647709);let I=({numCols:e,numRows:t,children:a})=>{(0,n.useEffect)(()=>{(0,l.Z)("GridComponents","/app/packages/StructuredFeed/ModuleReps/GridSectionModule/GridComponents.tsx")},[]);let i=(0,C.HG)(),{experimentalGutterBoints:r}=(0,T.Z)(),s=r??(i?p.jC:p.D6);return(0,_.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{display:"grid",gridTemplateColumns:`repeat(${e}, 1fr)`,gridTemplateRows:`repeat(${t}, 1fr)`,columnGap:s}},children:a})},F=({numCols:e,numRows:t,children:a})=>((0,n.useEffect)(()=>{(0,l.Z)("GridComponents","/app/packages/StructuredFeed/ModuleReps/GridSectionModule/GridComponents.tsx")},[]),(0,_.jsxs)(n.Fragment,{children:[(0,_.jsx)(o.xu,{display:"block",mdDisplay:"none",width:"100%",children:(0,_.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{display:"grid",gridTemplateRows:`repeat(${t}, 1fr)`,gap:"8px"}},children:a})}),(0,_.jsx)(o.xu,{display:"none",lgDisplay:"none",mdDisplay:"block",width:"100%",children:(0,_.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:`repeat(${t}, 1fr)`,gap:"8px"}},children:a})}),(0,_.jsx)(o.xu,{display:"none",lgDisplay:"block",width:"100%",children:(0,_.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{display:"grid",gridTemplateColumns:`repeat(${e}, 1fr)`,gridTemplateRows:`repeat(${t}, 1fr)`,gap:"12px"}},marginStart:10,children:a})})]}));var P=a(284660),Z=a(671811),E=a(88828);let A="rgba(0, 0, 0, 0)",M={1:375};function D({auxData:e,componentFallback:t,dangerouslySetActionUrl:a,dangerouslySetContentVisibleItemCount:i,disableHeader:l,dynamicItemWidth:r,initialSlotIndex:s=0,showExpanded:c,story:d,surface:u,view:h,viewParameter:g,width:m}){let y="related_searches_organic"===d.story_type,x=d.display_options?.content_display||{},w=x.model_type,{action:b}=d,T=a||d.action?.url||"",C=x.component_type??t,D=x.grid_layout?.rows,R="number"==typeof D?D:1,L=x.grid_layout?.cols,H="number"==typeof L?L:-1,z=-1===H,O=x.dynamic_item_width||{},K=O.narrow_view?M[O.narrow_view]:"100%",N=i??x.content_visible_item_count?.web,V=N&&m&&r?(0,p.Wv)({defaultItemWidth:p.yF,contentVisibleItemCount:N,gap:p.oX,moduleWidth:"number"==typeof m?m:parseInt(m,10)}):p.yF,{containerRef:B,itemsToRender:W,actionItem:U}=(0,E.Z)({items:d.objects||[],itemWidth:(0,P.Z)()?p.tG:V,itemGap:p.oX,actionItemType:b?"one":void 0,numRows:R}),G=U?U&&"object"==typeof U?1===w||4===w?U.images?.orig?.url||"":2===w&&U.image_large_url||"":"":void 0,$=(z?W:d.objects||[]).map((t,a)=>(0,_.jsx)(k.Z,{itemType:"string"==typeof t.type?t.type:null,overrideMarginBottom:y?0:void 0,children:(0,_.jsx)(j.Z,{auxData:e,boardKey:null,component:C,imagePlaceholderColor:A,imageWidth:V,item:t,pinKey:null,relatedInterestKey:null,slotIndex:(s??0)+a,story:d,surface:u,view:h,viewParameter:g})},`grid-section-module-item-${"id"in t?t.id:a}`)),J=!!T&&!!b?.text&&G&&(0,_.jsx)(S.Z,{auxData:e,buttonText:b.text,component:C,contentIds:d.content_ids,element:179,imageWidth:V,previewImageSrc:G,shape:function(e){switch(e){case 1:default:return"square";case 4:case 2:return"circle"}}(w??1),storyId:d.id,storyType:d.story_type,url:T,view:h,viewParameter:g});return y?(0,_.jsxs)(o.xu,{alignItems:"stretch",borderStyle:"lg",color:"default",direction:"column",display:"flex",justifyContent:"start",lgDirection:"row",lgPadding:8,padding:5,rounding:4,width:K,children:[d.title&&!l&&(0,_.jsx)(f.Z,{lgMarginBottomOverride:0,showExpanded:c,storyKey:{type:"Legacy",data:d}}),(0,_.jsx)(F,{numCols:H,numRows:R,children:$}),J]}):(0,_.jsxs)(o.xu,{alignItems:"stretch",color:"default",direction:"column",display:"flex",justifyContent:"start",width:K,children:[d.title&&!l&&(0,_.jsx)(f.Z,{showExpanded:c,storyKey:{type:"Legacy",data:d}}),z?(0,_.jsxs)(Z.Z,{containerRef:B,itemGap:p.oX,numRows:R,rowAlignment:"center",children:[$,J,R>1&&(0,_.jsx)(v.Z,{})]}):(0,_.jsxs)(n.Fragment,{children:[(0,_.jsx)(I,{numCols:H,numRows:R,children:$}),J]})]})}function R({auxData:e,componentFallback:t,showExpanded:a=!0,story:i,view:l,viewParameter:n}){let r=i.display_options?.content_display?.component_type??t,s=(0,P.Z)()?p.tG:p.yF;return(0,_.jsxs)(o.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[i.title&&(0,_.jsx)(f.Z,{showExpanded:a,storyKey:{type:"Legacy",data:i}}),(0,_.jsx)(o.Rk,{columnWidth:s,gutterWidth:p.oX,items:i.objects||[],layout:"flexible",renderItem:({data:t,itemIdx:a})=>(0,_.jsx)(j.Z,{auxData:e,boardKey:null,component:r,imagePlaceholderColor:A,item:t,pinKey:null,relatedInterestKey:null,slotIndex:a??0,story:i,view:l,viewParameter:n},a)})]})}function L(e){switch((0,n.useEffect)(()=>{(0,l.Z)("GridSectionModule","/app/packages/StructuredFeed/ModuleReps/GridSectionModule/GridSectionModule.tsx")},[]),e.story.display_options?.content_display?.pins_display){case 3:case 1:case 2:return(0,_.jsx)(R,{...e});default:return(0,_.jsx)(D,{...e})}}var H=a(956077),z=a(461951);let O={0:"400",1:"400",2:"700",3:"600",4:"200"};function K({auxData:e,component:t,onImageLoad:a,story:i,view:r,viewParameter:s}){(0,n.useEffect)(()=>{(0,l.Z)("SingleImageHero","/app/packages/StructuredFeed/ModuleReps/HeroModule/SingleImageHero.tsx")},[]);let{id:d,story_type:u,title:p="",description:h=""}=i,{hero_display_options:g,attribution_display_options:m}=i.display_options?.header_display||{},y=i.display_options?.header_display||{},f=O[y?.header_size||1],{image_style:x,dominant_color:w,width_height_ratio:b=1,image_url:S}=g||{},{text:v,subspan_text:j,attribution_action:k,icon:T}=m||{},{subspan_only:C}=k||{},I=(0,c.ZP)({loggingId:d,objectIdStr:d,impressionType:"Story",contextLogData:(0,n.useMemo)(()=>({story_id:d,story_type:u,...e}),[d,u,e]),slotIndex:0,viewParameter:s,viewType:r,componentType:t}),F="string"==typeof p?p:p?.format??"",P="string"==typeof h?h:h?.format??"";return(0,_.jsx)(o.xu,{ref:I,"data-test-id":"sf-single-image-hero",children:(0,_.jsxs)(o.kC,{direction:"column",children:[(0,_.jsxs)(o.xu,{overflow:"hidden",position:"relative",children:[(0,_.jsx)(o.xu,{dangerouslySetInlineStyle:1===x?{__style:{filter:"blur(4px)",transform:"scale(1.05)"}}:void 0,children:(0,_.jsx)(o.xu,{width:"100%",children:(0,_.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{aspectRatio:`${b} / 1`}},children:(0,_.jsx)(o.Ee,{alt:"",color:w||"#fff",fit:"cover",naturalHeight:1,naturalWidth:b||1,onLoad:a,role:"presentation",src:S||void 0,children:3===x?(0,_.jsxs)(n.Fragment,{children:[(0,_.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{background:z.OHS}},"data-test-id":"single-image-hero-gradient-overlay-top",height:"50%",left:!0,position:"absolute",right:!0,top:!0}),(0,_.jsx)(o.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{background:z.AEu}},"data-test-id":"single-image-hero-gradient-overlay-bottom",height:"50%",left:!0,position:"absolute",right:!0})]}):null})})})}),(0,_.jsx)(o.xu,{bottom:!0,"data-test-id":"bottom-title",padding:4,position:"absolute",children:(0,_.jsx)(o.X6,{accessibilityLevel:1,color:"light",size:f,children:F})})]}),(0,_.jsx)(o.xu,{marginTop:4,paddingX:4,children:(0,_.jsxs)(o.kC,{direction:"column",children:[(0,_.jsx)(o.xu,{children:(0,_.jsx)(o.xv,{size:"300",children:P})}),m&&(0,_.jsx)(o.xu,{"data-test-id":"single-image-hero-attribution-container",marginTop:3,children:(0,_.jsxs)(o.kC,{alignItems:"center",direction:"row",children:[1===T&&(0,_.jsx)(o.JO,{accessibilityLabel:"",color:"brandPrimary",dataTestId:"single-image-hero-pinterest-icon",icon:"pinterest",size:24}),2===T&&(0,_.jsx)(o.JO,{accessibilityLabel:"",dataTestId:"single-image-hero-info-circle-icon",icon:"info-circle",size:24}),3===T&&(0,_.jsx)(o.JO,{accessibilityLabel:"",dataTestId:"single-image-hero-arrow-up-right-icon",icon:"arrow-up-right",size:24}),(0,_.jsx)(o.xu,{marginStart:2*(0!==T),children:(()=>{if(!m||!v)return null;if(!k?.url)return(0,_.jsx)(o.xv,{size:"100",children:v});switch(C){case 1:{if(!j)return(0,_.jsx)(o.xv,{size:"100",children:v});let e=v.indexOf(j);if(-1===e)return(0,_.jsx)(o.xv,{size:"100",children:v});let t=v.substring(0,e),a=v.substring(e+j.length);return(0,_.jsxs)(o.xv,{size:"100",children:[t,(0,_.jsx)(o.xv,{inline:!0,size:"100",weight:"bold",children:(0,_.jsx)(o.rU,{display:"inline",href:k.url,underline:"none",children:j})}),a]})}case 2:return(0,_.jsx)(o.xv,{size:"100",children:(0,_.jsx)(o.rU,{href:k.url,children:v})});default:return(0,_.jsx)(o.xv,{size:"100",children:v})}})()})]})})]})})]})})}var N=a(312048),V=a(980787),B=a(744862),W=a(821342),U=a(19585),G=a(361055);let $=({actionText:e,actionUrl:t,articleId:a,author:i,authorAvatar:r,auxData:s,component:d,contentIds:u,coverImage:p,debug:h,index:g,isFullWidth:m=!1,onImageLoad:y,storyId:f,storyType:x,subtitle:w,title:b,view:S,viewParameter:v,width:j,windowWidth:k})=>{(0,n.useEffect)(()=>{(0,l.Z)("Hero","/app/packages/StructuredFeed/ModuleReps/HeroModule/Hero.tsx")},[]);let T=(0,U.Z)(),C=(0,N.s0)(),{logContextEvent:I}=(0,V.u)(),[F,P]=(0,n.useState)(!1),Z=(0,W.Z)(),E=Z.isAuth?Z?.avatar_color_index:void 0,A=(0,c.ZP)({loggingId:a,objectIdStr:a,impressionType:"Article",contextLogData:{content_ids:u,story_id:f,story_type:x,article_id:a,...s},slotIndex:g,viewParameter:v,viewType:S,componentType:d});return(0,_.jsx)(o.xu,{"data-test-id":"sf-hero",children:(0,_.jsxs)(o.xu,{ref:A,height:"auto",onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),width:j,children:[(0,_.jsx)(o.iP,{onTap:()=>{I({event_type:101,view_type:S,view_parameter:v,component:d,aux_data:{article_id:a,content_ids:u,story_id:f,story_type:x,...s}}),C(t)},children:(0,_.jsxs)(o.xu,{height:m?400:"35vw",maxHeight:500,overflow:"hidden",position:"relative",children:[(0,_.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{transition:"transform 0.4s",transform:F?"scale(1.5)":"scale(1)"}},height:"100%",width:"100%",children:(0,_.jsx)(o.Ee,{alt:T._('Cover image of this shopping spotlight', 'hero.heroCoverImage', 'alt text for an image previewing the contents of a spotlight article'),color:"#fff",fit:"cover",naturalHeight:400,naturalWidth:400,onLoad:y,src:p,children:(0,_.jsx)(o.xu,{color:"transparentDarkGray",display:"block",height:"100%",opacity:.3,width:"100%"})})}),(0,_.jsx)(o.xu,{bottom:!0,marginBottom:12*!!m,padding:6,position:"absolute",width:"100%",children:(0,_.jsxs)(o.kC,{direction:"column",height:"100%",justifyContent:"end",children:[(0,_.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{transition:"transform 0.4s",transform:F?"translateY(-20px)":"translateY(20px)"}},children:(0,_.jsx)(o.X6,{color:"light",size:k<=822?"700":k<1e3?"400":k<1100?"600":"700",children:b})}),(0,_.jsxs)(o.xu,{dangerouslySetInlineStyle:{__style:{opacity:+!!F,transition:F?"opacity 0.4s ease-in":"opacity 0.4s ease-out"}},display:"block",height:F?"auto":20,overflow:"hidden",children:[(0,_.jsx)(o.xv,{color:"inverse",children:w}),i&&(0,_.jsx)(o.xu,{marginTop:4,children:(0,_.jsxs)(o.kC,{alignItems:"center",direction:"row",children:[(0,_.jsx)(B.qE,{color:E,name:i,size:"md",src:r})," ",(0,_.jsx)(o.xv,{color:"inverse",children:i})]})})]}),(0,_.jsx)(o.xu,{marginTop:4,width:"74px",children:(0,_.jsx)(o.zx,{color:"white",onClick:()=>{C(t)},size:"lg",text:e})})]})})]})}),void 0!==h&&(0,_.jsx)(G.Z,{data:h})]})})};var J=a(300685),q=a(458684),X=a(828942);function Y({auxData:e,onImageLoad:t,story:a,view:i,viewParameter:r,component:s,width:c}){(0,n.useEffect)(()=>{(0,l.Z)("SingleImageHeroCarousel","/app/packages/StructuredFeed/ModuleReps/HeroModule/SingleImageHeroCarousel.tsx")},[]);let[d,u]=(0,n.useState)(0),p=(0,n.useRef)(null),h=a.objects?.slice(0,3)||[];return(0,_.jsxs)(o.xu,{ref:p,alignItems:"end",display:"flex",height:400,justifyContent:"center",position:"relative",width:c,children:[(0,_.jsx)(J.Z,{containerRef:p.current,id:a.id,index:d,slideWidth:c,children:h.map((l,n)=>(0,_.jsx)($,{actionText:l.action?.text||"",actionUrl:l.action?.url||"",articleId:l.id,auxData:e,component:s,coverImage:l.cover_images&&l.cover_images[0].originals?.url||"",debug:l.debug,index:n,isFullWidth:!0,onImageLoad:t,storyId:a.id,storyType:a.story_type,subtitle:l.subtitle?.format||"",title:l.title?.format||"",view:i,viewParameter:r,width:c,windowWidth:c},l.id))}),(0,_.jsx)(o.xu,{display:"inlineBlock",height:"auto",paddingY:5,position:"absolute",width:"60%",children:(0,_.jsx)(q.default,{addEllipsis:!0,backNode:(0,_.jsx)(X.Z,{iconColor:"inverse",iconType:"back",showFab:!0}),carouselData:{index:d,entityId:"",carouselSlots:h.map(e=>({id:e.id,title:null}))},carouselIndex:d,forwardNode:(0,_.jsx)(X.Z,{iconColor:"inverse",iconType:"forward",showFab:!0}),handleCarouselSwipe:e=>{u(e)},pinKey:null})})]})}function Q({auxData:e,onImageLoad:t,story:a,view:i,viewParameter:o,component:r,width:s}){(0,n.useEffect)(()=>{(0,l.Z)("SingleImageHeroDisplay","/app/packages/StructuredFeed/ModuleReps/HeroModule/SingleImageHeroDisplay.tsx")},[]);let c=a.objects&&a.objects.length>0,d=a.display_options?.header_display?.hero_display_options?.image_url;return!c&&d?(0,_.jsx)(K,{auxData:e,component:r,onImageLoad:t,story:a,view:i,viewParameter:o}):(0,_.jsx)(Y,{auxData:e,component:r,onImageLoad:t,story:a,view:i,viewParameter:o,width:s})}function ee({auxData:e,component:t,onImageLoad:a,story:i,view:r,viewParameter:s,windowWidth:c}){(0,n.useEffect)(()=>{(0,l.Z)("TripleImageHeroDisplay","/app/packages/StructuredFeed/ModuleReps/HeroModule/TripleImageHeroDisplay.tsx")},[]);let d=i.objects?.slice(0,3)||[];return d.length<3?null:(0,_.jsxs)(n.Fragment,{children:[(0,_.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:d[0].dominant_colors[0]}},flex:"grow"}),d.map((l,n)=>(0,_.jsx)($,{actionText:l.action?.text||"",actionUrl:l.action?.url||"",articleId:l.id,auxData:e,component:t,coverImage:l.cover_images&&l.cover_images[0].originals?.url||"",debug:l.debug,index:n,onImageLoad:a,storyId:i.id,storyType:i.story_type,subtitle:l.subtitle?.format||"",title:l.title?.format||"",view:r,viewParameter:s,width:500,windowWidth:c},l.id)),(0,_.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:d[2].dominant_colors[0]}},flex:"grow"})]})}function et({auxData:e,component:t,pwtSurfaceContext:a,story:i,view:s,viewParameter:c}){(0,n.useEffect)(()=>{(0,l.Z)("HeroModule","/app/packages/StructuredFeed/ModuleReps/HeroModule/HeroModule.tsx")},[]);let{width:d=0}=(0,r.Z)()||{},u=()=>{(0,H.Nx)("RenderHeroImages"),a&&a.markConstraintComplete("RenderHeroImages")},p=d>822&&(i.objects?.length??0)>=3?3:1;return(0,_.jsx)(n.Fragment,{children:(0,_.jsx)(o.kC,{alignItems:"stretch",direction:"row",justifyContent:"start",children:3===p?(0,_.jsx)(ee,{auxData:e,component:t,onImageLoad:u,story:i,view:s,viewParameter:c,windowWidth:d}):(0,_.jsx)(Q,{auxData:e,component:t,onImageLoad:u,story:i,view:s,viewParameter:c,width:d})})})}function ea({story:e}){(0,n.useEffect)(()=>{(0,l.Z)("SingleImageUpsellModule","/app/packages/StructuredFeed/ModuleReps/SingleImageUpsellModule/SingleImageUpsellModule.tsx")},[]);let t=(0,N.s0)(),{user:a,custom_properties:i,action:r}=e||{},{full_name:s,username:c,image_medium_url:d,avatar_color_index:u}=a||{},h=s||e.title?.format||"",{url:g,text:m}=r||{},{image:y}=i||{};if(!g||!m)return null;let f=(0,_.jsxs)(o.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:"100%",justifyContent:"center",padding:2,position:"relative",children:[c&&d&&(0,_.jsx)(o.xu,{left:!0,padding:2,position:"absolute",top:!0,children:(0,_.jsx)(B.qE,{color:u||void 0,name:c,size:"sm",src:d})}),h&&(0,_.jsx)(o.xv,{color:"inverse",weight:"bold",children:h})]});return(0,_.jsxs)(o.xu,{marginBottom:4,width:p.yF,children:[(0,_.jsx)(o.iP,{onTap:()=>t(g),children:(0,_.jsx)(o.zd,{height:p.yF,rounding:2,wash:!0,children:"string"==typeof y&&y?(0,_.jsx)(o.Ee,{alt:h,fit:"contain",naturalHeight:p.yF,naturalWidth:p.yF,src:y,children:f}):(0,_.jsx)(o.xu,{height:p.yF,width:p.yF,children:f})})}),(0,_.jsx)(o.xu,{marginTop:3,children:(0,_.jsx)(o.ZP,{fullWidth:!0,href:g,text:m})})]})}let ei=new Set([101]);var el=a(598579);let en="UNKNOWN_CONTAINER_TYPE",eo={2:"center",3:"end",1:"start"},er=(void 0!==i||(i=a(189039)).hash&&"89000b08539b2d49298d8c3af31ee2f4"!==i.hash&&console.error("The definition of 'StructuredFeedStoryModule_story' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function es(e){var t;(0,n.useEffect)(()=>{(0,l.Z)("StructuredFeedStoryModule","/app/packages/StructuredFeed/ModuleReps/utils/StructuredFeedStoryModule.tsx")},[]);let{auxData:a,componentFallback:i,initialSlotIndex:p,view:h,viewParameter:g,width:m}=e,{story:y,storyKey:x,...w}=e,{width:S=0}=(0,r.Z)()||{},v=(0,s.Z)(er,x),j=v?.displayOptions?.contentDisplay?.componentType??i,k={...w,component:j},T=(0,c.ZP)({clientTrackingParams:v?.trackingParams,componentType:j,contextLogData:{story_id:v?.storyId,story_type:v?.storyType,content_ids:v?.contentIds,...a},impressionType:"Story",loggingId:v?.storyId,slotIndex:p||0,viewParameter:g,viewType:h}),C=S<=el.$R?v?.displayOptions?.contentDisplay?.dynamicJustifyContent?.narrowView?eo[v.displayOptions.contentDisplay.dynamicJustifyContent.narrowView]:"start":v?.displayOptions?.contentDisplay?.dynamicJustifyContent?.wideView?eo[v.displayOptions.contentDisplay.dynamicJustifyContent.wideView]:"start",I=(()=>{switch(v?.containerType){case 90:case 139:return(0,_.jsx)(d.default,{...k,story:y,storyKey:v,width:m});case 88:return(0,_.jsx)(f.Z,{...k,storyKey:v});case 89:let{location:e,text:t,url:a}=v?.action||{};return(0,_.jsx)(u.Z,{location:e,text:t,url:a});case 91:return!!y&&(0,_.jsx)(L,{...k,story:y});case 101:return!!y&&(0,_.jsx)(et,{...k,story:y});case 92:return!!y&&(0,_.jsx)(ea,{...k,story:y});case 131:return!!y&&(0,_.jsx)(b,{...k,story:y});default:return en}})();return I===en?null:(0,_.jsxs)(o.xu,{ref:T,"data-test-id":v?.storyType??"structured-feed-story-module",display:"flex",justifyContent:C,width:(t=v?.containerType,ei.has(t))?void 0:m,children:[I,(0,_.jsx)(o.xu,{})]})}},524884:function(e,t,a){a.d(t,{Z:()=>l});var i=a(785893);let l=(0,i.jsx)("svg",{fill:"none",height:"5",viewBox:"0 0 37 5",width:"37",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("rect",{fill:"#E9E9E9",height:"5",rx:"2.5",width:"37"})})},291892:function(e,t,a){a.d(t,{Z:()=>r});var i=a(281098),l=a(667294),n=a(284778),o=a(785893);function r({alt:e,children:t,color:a,elementTiming:r,fetchPriority:s,isActive:c=!1,naturalHeight:d,naturalWidth:u,onLoad:p,src:h,fit:g="none",srcSet:m,...y}){(0,l.useEffect)(()=>{(0,i.Z)("ImageWithPerfTiming","/app/packages/pwt-logger/ImageWithPerfTiming.tsx")},[]);let f=(0,l.useRef)(null),_=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(h!==f.current||c&&c!==_.current){f.current=h??null;let e=document.querySelector(`img[src="${h}"]`)||null;e?.complete&&p()}_.current=c},[h,p,c]),(0,o.jsx)(n.Z,{...y,alt:e,color:a,elementTiming:r,fetchPriority:s,fit:g,naturalHeight:d,naturalWidth:u,onLoad:p,src:h,srcSet:m,children:t})}},671811:function(e,t,a){a.d(t,{Z:()=>s});var i=a(281098),l=a(667294),n=a(20256),o=a(785893);let r={center:{outer:"center",inner:"center"},left:{outer:"start",inner:"start"},right:{outer:"end",inner:"end"}};function s({children:e,itemGap:t,containerRef:a,numRows:s=1,rowAlignment:c="center"}){(0,l.useEffect)(()=>{(0,i.Z)("StoryRow","/app/packages/ui/StoryRow.tsx")},[]);let d=r[c];return(0,o.jsx)(n.xu,{ref:a,width:"100%",children:(0,o.jsx)(n.kC,{alignItems:"center",justifyContent:d.outer,children:(0,o.jsx)(n.kC,{dataTestId:"story-row-items-container",gap:{row:Math.floor(t/4),column:0},justifyContent:d.inner,wrap:s>1,children:e})})})}},88828:function(e,t,a){a.d(t,{Z:()=>l});var i=a(667294);function l({items:e,itemWidth:t,itemGap:a,numRows:l=1,actionItemType:n}){let o,[r,s]=function(){let[e,t]=(0,i.useState)(0),a=(0,i.useRef)(null),l=(0,i.useCallback)(()=>{a.current&&t(a.current.clientWidth)},[a]);return(0,i.useEffect)(()=>(window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}),[l]),(0,i.useEffect)(l),[e,a]}(),c=Math.floor((r+a)/(t+a))*l||l,d=e.slice(0,c),u=[];switch(n){case"nextFour":if(c>=e.length){let e=d.pop();u=e?[e]:[]}else d.pop(),u=e.slice(c-1,c+3);break;case"one":o=c>e.length?e[Math.floor(e.length/2)]:d.pop()}return{containerRef:s,itemsToRender:d,actionItem:o,nextFourItems:u}}},244074:function(e,t,a){a.d(t,{Z:()=>l});var i=a(667294);let l=()=>{let e=(0,i.useRef)(!1);return(0,i.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},518259:function(e,t,a){a.d(t,{DL:()=>u,ZP:()=>g,bh:()=>p,rv:()=>h});var i=a(281098),l=a(667294),n=a(20256),o=a(667835),r=a(821342),s=a(675973),c=a(588836),d=a(785893);let u=20,p=3,h=2;function g({handleBackClick:e,viewParameter:t,viewType:a}){(0,l.useEffect)(()=>{(0,i.Z)("MobileVisualSearchBackButton","/app/www/VisualSearch/mobile/MobileVisualSearchBackButton.tsx")},[]);let{checkExperiment:u}=(0,s.Z)(),g=(0,o.vs)(),{isAuth:m}=(0,r.Z)(),y=m&&u("mweb_onebar_hybrid_search",{dangerouslySkipActivation:!0}).anyEnabled;return(0,d.jsx)(n.xu,{"data-test-id":"cancelButton",left:!0,margin:h,position:"fixed",right:!0,top:!0,width:"fit-content",children:(0,d.jsx)(c.default,{bgColor:y?"white":"transparent",color:g||y?"darkGray":"white",disableRedirect:!0,icon:"cancel",isVisualSearch:!0,onTouch:e,padding:p,size:"lg",viewParameter:t,viewType:a})})}},319205:function(e,t,a){a.d(t,{AK:()=>d,R$:()=>n,S2:()=>c,Z3:()=>u,_z:()=>s,pV:()=>l,xZ:()=>o,zg:()=>r});var i=a(518259);let l=.6,n=.4,o=50,r=.1,s=i.DL+4*i.bh*2+4*i.rv*2,c=4,d=4.25,u=2.5},903098:function(e,t,a){a.d(t,{Z:()=>P});var i=a(281098),l=a(667294),n=a(20256),o=a(937805),r=a(19585),s=a(573631),c=a(291892),d=a(956077),u=a(15667),p=a(159527),h=a(647709),g=a(341742),m=a(35333),y=a(883379),f=a(785893);function _({children:e,isImagePinForUnauthOnTablet:t}){(0,l.useEffect)(()=>{(0,i.Z)("ClickthroughOverlay","/app/www/closeup/duplo/ClickthroughOverlay.tsx")},[]);let{isAuthenticated:a}=(0,u.B)(),o=(0,y.Z)({skipExpActivation:!0});return(0,f.jsxs)(n.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"pointer",width:t?"40vw":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!t||void 0,top:!0,zIndex:a?void 0:m.eu,children:[(0,f.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",borderRadius:o?void 0:"6px 6px 0 0",WebkitTransition:"opacity .04s linear",transition:"opacity .04s linear"}},left:!0,opacity:.4,position:"absolute",right:!0,top:!0}),e]})}var x=a(675973),w=a(607001),b=a(941404),S=a(572227),v=a(741155),j=a(334536);function k({setShowClickthroughOverlay:e,isEligibleForPdp:t,isEligibleForDesktopSocialInviteOverlay:a,inviterFirstName:o}){(0,l.useEffect)(()=>{(0,i.Z)("UnauthClickthroughOverlayContent","/app/www/closeup/duplo/unauth/UnauthClickthroughOverlayContent.tsx")},[]);let s=(0,r.Z)(),c=(0,S.Z)(),d=(0,w.Z)(),u=(0,l.useRef)(null),p="desktop"===(0,h.ZP)(),g=o&&a,m=g&&(s._('Sign up to join {{ name }} on Pinterest', 'pin.closeup.wash.desktop.shareNotification', 'Clickthrough overlay for desktop users that a sender ({{ name }}) shared a Pin to them, name: username')).replace("{{ name }}",o),y=s._('Click to make the most out of this idea with a free account', 'web.unauth.plp.clickable_wash.header', 'Copy shown on hover to sign up for an account'),_=s._('Tap to make the most out of this idea with a free account', 'mweb.unauth.plp.clickable_wash.header', 'Pin clickable wash header text'),k=(0,v.Z)(),{checkExperiment:T}=(0,x.Z)();return(0,f.jsx)(n.iP,{onMouseEnter:()=>{g&&(0,b.My)("dweb.main_pin.social.wash.view"),(0,b.My)("dweb.pin.wash.view")},onMouseLeave:()=>{g?c({action:"dismiss",item:"main-pin-social-wash"}):c({action:"dismiss",item:"main-pin-wash"})},onTap:({event:e})=>{p&&(e.preventDefault(),c({action:"click",item:"pin-image"}),a&&o&&c({action:"click",item:"main-pin-social-wash"}),c({action:"click",item:"main-pin-image-signup-modal"}),T("migration_upsell_manager_redux").anyEnabled||T("migration_upsell_manager_redux_dweb").anyEnabled||T("migration_upsell_manager_redux_mweb").anyEnabled?k((0,j.QA)()):d({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"click_closeup",desktopOptions:{modalType:"signup",modalOptions:{source:"defaultSource",container:"pinWash"}}}),t&&c({action:"click",item:"pdp-pin-image"}))},children:(0,f.jsxs)(n.xu,{zIndex:new n.Ry(2),children:[(0,f.jsx)(n.xu,{ref:u,alignItems:"center",bottom:!0,"data-test-id":"main-pin-hover-overlay",direction:"column",display:"flex",height:"100%",justifyContent:a?"center":void 0,left:!0,position:"absolute",right:!0,top:!0,width:"100%",children:(0,f.jsx)(n.xu,{alignItems:"center",direction:"column",display:"flex",maxWidth:240,paddingY:10,children:(0,f.jsx)(n.xu,{marginTop:8,children:(0,f.jsx)(n.X6,{align:"center",color:"light",size:g?"600":"400",children:p?m||y:_})})})}),!p&&(0,f.jsx)(n.xu,{marginEnd:4,marginTop:4,position:"absolute",right:!0,top:!0,children:(0,f.jsx)(n.hU,{accessibilityLabel:s._('Close pin clickable wash', 'mweb.unauth.plp.clickable_wash.close_button', 'Close button'),icon:"cancel",iconColor:"white",onClick:({event:t})=>{t.stopPropagation(),e&&(e(!1),c({action:"dismiss",item:"main-pin-hover-overlay"}))},size:"md"})})]})})}var T=a(326113),C=a(867552),I=a(603316),F=a(756334);let P=e=>{(0,l.useEffect)(()=>{(0,i.Z)("CloseupImage","/app/www/closeup/duplo/CloseupImage.tsx")},[]);let t=(0,r.Z)(),{alt:a,clickthroughOverlayOptions:m,color:x,isFlashlightPage:w,naturalHeight:b,naturalWidth:S,placeholder:v,pwtElementTimingId:j,setShowClickthroughOverlay:P,showSpinner:Z,src:E,stickyFooter:A,isEligibleForPdp:M}=e,D=!(0,s.b)(),{isAuthenticated:R}=(0,u.B)(),L=(0,h.ZP)(),H=(0,l.useRef)(null),z=(0,y.Z)({skipExpActivation:!0}),O=(0,l.useRef)(!1),{mWebCloseupRedesignEnabled:K}=(0,o.Z)(),[N,V]=(0,l.useState)(!D||!!E&&!!v&&v===E),B=(0,l.useRef)(""),W=()=>{(0,d.Nx)("PinPageMainImageRendered"),O.current||((0,I.nP)("mweb.closeup.closeup_image.load"),O.current=!0)};(0,l.useEffect)(()=>{let e=new Image;e.onload=()=>V(!0),e.src=E},[]);let U=(0,l.useRef)((0,C.u)()?.setHasScrolledPastMainContent);(0,l.useEffect)(()=>{let e=(0,p.Z)(()=>{if(H.current){let t=window.scrollY>H.current.offsetTop+H.current.offsetHeight;U.current?.(t),t&&window.removeEventListener("scroll",e)}},10);window.addEventListener("scroll",e)},[]),(0,g.Z)(()=>{E||(0,I.nP)("mweb.closeup.closeup_image.no_image_url"),(0===b||0===S)&&(0,I.nP)("mweb.closeup.closeup_image.invalid_dimensions")});let G=!w&&"tablet"===L,$=D?(0,f.jsx)(c.Z,{alt:a,color:x,elementTiming:j,naturalHeight:b,naturalWidth:S,onLoad:W,src:v}):null,J=T.Hg;return(w||"phone"===L||z)&&(J="100%"),(0,f.jsx)(F.Z,{metricName:"CloseupImage",children:(0,f.jsxs)(n.xu,{ref:H,"data-test-id":"pin-closeup-image",maxHeight:"100%",maxWidth:"tablet"===L?T.g6:void 0,minHeight:"auto",overflow:A?void 0:"hidden",position:"relative",rounding:6*(!w&&"phone"!==L),width:J,children:[!R&&m&&(0,f.jsx)(_,{isImagePinForUnauthOnTablet:!1,children:(0,f.jsx)(k,{inviterFirstName:B.current,isEligibleForPdp:M,setShowClickthroughOverlay:P})}),$&&(G?(0,f.jsx)(n.xu,{overflow:"hidden",rounding:6,children:$}):$),(0,f.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:+!!N,transition:N&&"desktop"!==L?"opacity .5s ease-in-out":void 0,backgroundColor:x}},left:!0,overflow:G?"hidden":void 0,position:D?"absolute":"relative",right:!0,rounding:G?6:5,top:!0,children:D?(0,f.jsx)(n.Ee,{alt:a,fetchPriority:K?"high":void 0,naturalHeight:b,naturalWidth:S,role:K?"img":void 0,src:E}):(0,f.jsx)(c.Z,{alt:a,color:x,elementTiming:j,fetchPriority:K?"high":void 0,naturalHeight:b,naturalWidth:S,onLoad:W,src:E})}),Z&&(0,f.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:+!N,transition:N?"opacity .5s ease-in-out":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:!N&&(0,f.jsx)(n.kC,{alignItems:"center",justifyContent:"start",children:(0,f.jsx)(n.xH,{accessibilityLabel:t._('Loading image', 'Loading higher resolution image', 'Loading higher resolution image'),show:!0})})}),A]})})}},326113:function(e,t,a){a.d(t,{$K:()=>o,Hg:()=>l,g6:()=>n,w6:()=>i});let i=(e,t)=>Array.from({length:t-e},(t,a)=>a+e),l=508,n=600;function o(e){return null!=e}},80245:function(e,t,a){a.d(t,{By:()=>d,IT:()=>c,N6:()=>l,br:()=>n,jq:()=>r,lU:()=>s,tq:()=>o});var i=a(686319);let l=(e,t)=>({type:"UPDATE_CURRENT_SEARCH",payload:{query:e,scope:t}}),n=(e,t)=>({type:"UPDATE_RECENT_SEARCHES",payload:{query:e,scope:t}}),o=e=>({type:"UPDATE_RECENT_SEARCHES_BATCH",payload:{data:e}}),r=(e,t,a)=>({type:"UPDATE_TYPEAHEAD_CACHE",payload:{items:e,term:t,recent_queries_tags:a}}),s=(e,t,a)=>l=>{(0,i.Z)({url:"/v3/search/recent/",method:"DELETE",data:{vertical:e}}).then(t,a),l("PERSONAL"===e?{type:"CLEAR_RECENT_PERSONAL_SEARCHES"}:{type:"CLEAR_RECENT_SEARCHES"})},c=(e,t,a,l,n)=>o=>{a||(0,i.Z)({url:"/v3/search/recent/",method:"DELETE",data:{query:e,vertical:t}}).then(l,n),o("PERSONAL"===t?{type:"CLEAR_RECENT_PERSONAL_SEARCH",payload:{query:e}}:{type:"CLEAR_RECENT_SEARCH",payload:{query:e}})},d=e=>t=>{t({type:"RELOAD_VISUAL_SEARCH_ANNOTATIONS",payload:{pinId:e}})}},32228:function(e,t,a){a.d(t,{Z:()=>p});var i=a(281098),l=a(667294),n=a(20256),o=a(748130),r=a(816358),s=a(809295),c=a(949044),d=a(974705),u=a(785893);function p({oneBarModules:e,showIndicator:t,setProductFiltersModalIsOpen:a,showProductFilters:p=!1}){(0,l.useEffect)(()=>{(0,i.Z)("OneBar","/app/www/search/OneBar.tsx")},[]);let h=(0,l.useRef)(null),g=(0,l.useRef)(null),[m,y]=(0,l.useState)(0);(0,l.useEffect)(()=>{setTimeout(()=>{g.current?.scrollTo({top:0,left:m,behavior:"smooth"})},1e3)},[m]);let f=new s.ZP;(0,l.useEffect)(()=>{let e=h.current;return e&&r.Z.addObstruction("top",e),()=>{e&&r.Z.removeObstruction("top",e)}});let _=e.map(e=>(0,c.Z)(d.Z,!0)(e));return(0,u.jsx)(n.xu,{ref:h,color:"default","data-root-margin":"search-one-bar",height:54,overflow:"hidden",children:(0,u.jsx)(n.xu,{ref:g,"data-test-id":"mweb-onebar-search",height:64,overflow:"auto",children:(0,u.jsx)(n.kC,{gap:1,maxWidth:"100%",children:_.map((e,i)=>(0,u.jsx)(o.Z,{hasProductFiltersApplied:t,impressionsFramework:f,index:i,module:e,oneBarModulesKey:null,onFilterButtonClick:()=>{p&&a?.(!0)},setLatestSelectedGuideX:y,showMWebProductFilters:p},`OneBarModule-${e.id||""}`))})})})}},94207:function(e,t,a){a.d(t,{Nu:()=>n,q:()=>l,r:()=>o,z5:()=>i});let i=["board_shop_tool_module","shop_tab_upsell","story_pins_search_upsell","structured_search_bubble","user_style_story_v2","search_story_separator","search_story_landing_page_header"],l="checklist_education_feed_card",n=["#CFFFCA","#D7EDFF","#DAD4FF","#DAFFF6","#FFE2EB","#FFE4C1","#FFFD92"],o={"#d7edff":"01","#002966":"01","#cfffca":"02","#ffe0e0":"04","#800000":"04","#dafff6":"06","#fffd92":"07","#c3f9c2":"07","#005f3e":"07","#ffe4c1":"08","#842000":"08","#ffe2eb":"09","#e9e4ff":"10","#400387":"10","#dad4ff":"10","#efefef":"11"}},674874:function(e,t,a){a.d(t,{Z:()=>eB});var i,l,n,o=a(281098),r=a(667294),s=a(821342),c=a(647709),d=a(685073);a(167912);var u=a(20256),p=a(28427),h=a(801082),g=a(19585),m=a(886981),y=a(634737),f=a(169053),_=a(581722),x=a(312048),w=a(761578),b=a(390843),S=a(369416),v=a(914061),j=a(675973),k=a(123998),T=a(351222),C=a(378888),I=a(341742),F=a(359829),P=a(144633),Z=a(85363),E=a(611304),A=a(551651),M=a(762525),D=a(80245),R=a(521009),L=a(503246),H=a(524884),z=a(816358),O=a(15667),K=a(32937),N=a(941404),V=a(572227),B=a(958742),W=a(785893);function U(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let G={baseStyles:{transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",transformOrigin:"bottom",touchAction:"none"}};class $ extends r.Component{constructor(...e){super(...e),U(this,"state",{currentDistanceFromTop:this.props.maxDistanceFromTop?this.props.maxDistanceFromTop:-1,headerHeight:this.props.headerHeight||0,isAtTop:!1,scrollDirection:0,shouldAnimate:!1,startY:0,canScrollOnChildren:!1}),U(this,"onTouchStart",e=>{let{clientY:t}=e.touches[0];this.setState({startY:t,shouldAnimate:!1,scrollDirection:0})}),U(this,"onTouchMove",e=>{let{clientY:t}=e.touches[0],{startY:a,currentDistanceFromTop:i}=this.state,{canMoveModal:l,maxDistanceFromTop:n}=this.props,o=t-a;l&&void 0!==n&&(o>0&&i>=0&&i<n&&window.scrollY<=0||o<0&&i<=n&&i>=0)&&this.setModalPosition(t)}),U(this,"onTouchEnd",()=>{let{entryPoint:e,minDistanceFromTop:t,canMoveModal:a}=this.props;this.props.shouldSnapToEnds&&2===this.state.scrollDirection?(this.header&&z.Z.removeObstruction("top",this.header),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:this.props.maxDistanceFromTop,shouldAnimate:!0,isAtTop:!1}),e&&(0,N.My)(`mweb.${e}.snap_to_bottom`)):this.props.shouldSnapToEnds&&1===this.state.scrollDirection&&(this.state.isAtTop?this.setState({currentDistanceFromTop:0,shouldAnimate:!0}):this.setState({canScrollOnChildren:!!a,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),this.header&&z.Z.addObstruction("top",this.header),e&&(0,N.My)(`mweb.${e}.sliding_modal.snap_to_top`))}),U(this,"handleHandleMove",e=>{let{clientY:t}=e.touches[0],{canMoveModal:a,maxDistanceFromTop:i,minDistanceFromTop:l}=this.props,{startY:n,currentDistanceFromTop:o}=this.state;a&&o<=(l||0)&&t-n>0&&(e.stopPropagation(),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:i,isAtTop:!1,scrollDirection:0,shouldAnimate:!0,startY:0}))}),U(this,"handleHeaderTouch",()=>{let{maxDistanceFromTop:e,minDistanceFromTop:t,entryPoint:a,canMoveModal:i}=this.props,{currentDistanceFromTop:l,scrollDirection:n}=this.state;0===n&&(l===e?(this.setState({canScrollOnChildren:!!i,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),(0,N.My)(`mweb.${a}.sliding_modal.header_touch.snap_to_top`)):e&&(this.setState({canScrollOnChildren:!1,currentDistanceFromTop:e,shouldAnimate:!0,isAtTop:!1}),(0,N.My)(`mweb.${a}.sliding_modal.header_touch.snap_to_bottom`)))}),U(this,"handleCloseIconTouch",e=>{let{currentDistanceFromTop:t}=this.state,{onDismiss:a,logContextEvent:i,maxDistanceFromTop:l,viewParameter:n,viewType:o}=this.props;e.stopPropagation(),a&&(i({aux_data:{commerce_data:JSON.stringify({snapped_top:0===t})},element:75,event_type:102,view_parameter:n,view_type:o}),this.setState({currentDistanceFromTop:l,startY:0,scrollDirection:0},()=>a(e)))}),U(this,"getModalStyles",()=>{let{shouldSnapToEnds:e}=this.props,{currentDistanceFromTop:t,shouldAnimate:a,canScrollOnChildren:i}=this.state,{baseStyles:l}=G;return{...l,animation:"modalReveal 0.3s ease-out both",position:i?"absolute":"fixed",top:t>-1?t:void 0,bottom:0,width:"100vw",...e&&a?{transitionDuration:"500ms",transitionProperty:"transform, opacity, top"}:Object.freeze({})}}),U(this,"setModalPosition",e=>{let{startY:t,currentDistanceFromTop:a}=this.state,{maxDistanceFromTop:i,snapToEndThreshold:l,entryPoint:n}=this.props;if(i){let o=e-t,r=Math.floor("CloseupShop"===n||"CloseUpMainPinDrawer"===n?Math.max(0,a+o):Math.min(i,Math.max(0,a+o))),s=0;if(void 0!==l&&l>=0){let e=Math.floor(l*i),t=Math.floor((1-l)*i);o<0?s=r>t?2:1:o>0&&(s=r>e?2:1)}this.setState({startY:e,currentDistanceFromTop:r,scrollDirection:s})}})}componentDidMount(){let{isOpen:e}=this.props;e&&z.Z.pause()}componentDidUpdate(e,t){let{domainFilters:a,priceFilters:i,cropSource:l,isOpen:n,logContextEvent:o,maxDistanceFromTop:r,setHasDraggedDrawerToFullScreen:s,minDistanceFromTop:c,entryPoint:d}=this.props,{currentDistanceFromTop:u}=this.state;n&&!e.isOpen?z.Z.pause():!n&&e.isOpen&&z.Z.resume(),"CloseUpMainPinDrawer"===d&&r<e.maxDistanceFromTop&&u>r&&this.handleHeaderTouch(),t.currentDistanceFromTop!==(e.minDistanceFromTop||0)&&u===(c||0)&&s&&s(!0),a&&i&&(!(0,L.ZP)(a,e.domainFilters)||!(0,L.ZP)(i,e.priceFilters))&&o({event_type:13,view_parameter:"related_products"===(0,B.Z)(l)?3455:3456,view_type:72,element:11735})}componentWillUnmount(){let{isOpen:e}=this.props;this.header&&z.Z.removeObstruction("top",this.header),e&&z.Z.resume()}render(){let{children:e,headerChildren:t,heading:a,isAuth:i,isInHSObjLevelOneBarExp:l,isOpen:n,isRTL:o,mobileAccessibilityCloseIconLabel:r,mobileHideCloseIcon:s,noDivider:c,showHandle:d}=this.props,{headerHeight:p,canScrollOnChildren:h}=this.state,g=h||!i||l?"0":"32px 32px 0 0";return n?(0,W.jsx)(K.Z,{children:(0,W.jsx)(u.xu,{"aria-label":a,role:"dialog",children:(0,W.jsx)(u.xu,{color:"default",dangerouslySetInlineStyle:{__style:{...this.getModalStyles(),borderRadius:g}},"data-test-id":"sliding-modal-events-handler",onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,children:(0,W.jsxs)(u.iP,{accessibilityLabel:this.props.i18n._('View all search results', 'SlidingModal.Header.a11yLabel', 'Accessibility label for header of search results in flashlight'),onTap:this.handleHeaderTouch,children:[(0,W.jsxs)(u.Le,{top:p||0,children:[d&&(0,W.jsx)(u.xu,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"8px 0 24px 0",borderRadius:g}},"data-test-id":"slidingModalHandle",display:"flex",justifyContent:"center",onTouchMove:this.handleHandleMove,children:H.Z}),l&&(0,W.jsxs)(u.xu,{alignItems:"center",color:"default",display:this.state.isAtTop?"flex":"none",height:60,justifyContent:"center",opacity:+!!this.state.isAtTop,position:"relative",children:[(0,W.jsx)(u.xu,{alignItems:"center",display:"flex",left:!0,marginStart:2,padding:3,position:"absolute",children:(0,W.jsx)(u.JO,{accessibilityLabel:this.props.i18n._('Close sliding modal', 'slidingModal.hybridSearch.closeModal', 'Accessibility label for close icon on top of slider modal'),color:"default",icon:"arrow-down",size:"20"})}),(0,W.jsx)(u.kC,{alignItems:"stretch",flex:"grow",justifyContent:"center",children:(0,W.jsx)(u.xv,{size:"300",weight:"bold",children:this.props.i18n._('More like this', 'slidingModal.hybridSearch.moreLikeThis', 'top of slider modal to show similar pins with hybrid search')})})]}),!s&&(0,W.jsxs)(u.xu,{ref:e=>{this.header=e},color:"default",rounding:2,children:[(0,W.jsxs)(u.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,W.jsx)(u.kC,{alignItems:"center",justifyContent:"start",children:(0,W.jsx)(u.hU,{accessibilityLabel:r||"Close visual search results",dataTestId:"close-visual-search-results",icon:"arrow-back",iconColor:"gray",onClick:({event:e})=>this.handleCloseIconTouch(e),padding:5,size:"lg"})}),(0,W.jsx)(u.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:function({filterIconShown:e,isRTL:t}){let a=t?"marginRight":"marginLeft",i=t?"marginLeft":"marginRight";return e?{[a]:38,[i]:50,marginTop:15,marginBottom:15}:{[a]:-10,[i]:50,marginTop:15,marginBottom:15}}({isRTL:o})},"data-test-id":"slidingModalHeader",display:"flex",flex:"grow",justifyContent:"center",children:(0,W.jsx)(u.X6,{accessibilityLevel:2,align:"center",size:"400",children:a})})]}),t||null,!c&&(0,W.jsx)(u.iz,{})]})]}),(0,W.jsx)(u.xu,{overflow:h?"auto":"visible",children:e})]})})})}):null}}function J(e){(0,r.useEffect)(()=>{(0,o.Z)("SlidingModal","/app/www/SlidingModal.tsx")},[]);let t=(0,g.Z)(),a=(0,R.Z)(),{isRTL:i}=(0,O.B)(),l=(0,V.Z)(),{isAuth:n}=(0,s.Z)(),{checkExperiment:c}=(0,j.Z)(),d=n&&c("mweb_onebar_hybrid_search",{dangerouslySkipActivation:!0}).anyEnabled;return(0,W.jsx)($,{...e,i18n:t,isAuth:n,isInHSObjLevelOneBarExp:d,isRTL:i,logContextEvent:a,trackInteraction:l})}var q=a(319205),X=a(93966),Y=a(751961),Q=a(845421),ee=a(474147),et=a(425140),ea=a(980787),ei=a(62291);function el(){let[e,t]=(0,r.useState)(0),[a,i]=(0,r.useState)(0),[l,n]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)(void 0);function u(){s(!1),n(!1),d(void 0)}function p(e,t){"vertical"!==t&&e.stopPropagation()}return{onCarouselTouchStart:function(e){let{clientX:a,clientY:l}=e.touches[0];t(a),i(l),u()},onCarouselTouchMove:function(t){let{clientX:i,clientY:r}=t.touches[0],u=Math.abs(i-e);Math.abs(r-a)>10&&n(!0),u>10&&s(!0),o&&l?d(e=>e||"vertical"):o?d(e=>e||"horizontal"):l?d(e=>e||"vertical"):d(void 0),p(t,c)},onCarouselTouchEnd:function(e){p(e,c),u()}}}function en({data:e,pinId:t,surfaceType:a,viewParameter:i,viewType:l}){(0,r.useEffect)(()=>{(0,o.Z)("MobileVisualSearchCarousel","/app/www/VisualSearch/mobile/Feed/MobileVisualSearchCarousel.tsx")},[]);let n=(0,c.Wb)(),s=(0,g.Z)(),{logContextEvent:d}=(0,ea.u)(),{width:p}=(0,w.Z)()||{},{onCarouselTouchStart:h,onCarouselTouchMove:m,onCarouselTouchEnd:y}=el(),f=(e?.results||[]).find(e=>"story"===e.type),{url:_=`/pin/${t}`,text:x=""}=f?.action||{},b=s._('Shop similar', 'mobileFlashlight.productUpsellTitle', 'Shop similar products from the image.');function S(){d({component:14339,element:179,event_type:102,view_parameter:i,view_type:l})}return f&&"stl"!==a?(0,W.jsxs)(u.xu,{children:[(0,W.jsxs)(u.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginBottom:2,paddingX:q.S2,children:[(0,W.jsx)(u.Tg,{href:_,onTap:({event:e})=>{e.stopPropagation(),S()},tapStyle:"compress",children:(0,W.jsx)(u.X6,{accessibilityLevel:2,size:"400",children:b})}),(0,W.jsx)(u.I_,{accessibilityLabel:x||s._('See more', 'headerModule.headerModuleActionButton.iconButton', 'An right arrow icon button to show more similar pins to the user in a new page'),bgColor:"transparent",dataTestId:"product-upsell-action-button",href:_,icon:"arrow-forward",iconColor:"darkGray",onClick:S,size:"sm"})]}),(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{touchAction:"pan-x",overflowY:"hidden"}},onTouchEnd:y,onTouchMove:m,onTouchStart:h,children:(0,W.jsx)(ei.default,{component:14339,contentVisibleItemCountOverride:n?q.AK:q.Z3,disableHeader:!0,story:f,storyKey:f?{type:"Legacy",data:f}:null,surface:"ShoppingDynamicHeightGrid",view:l,viewParameter:i,width:p})})]}):null}var eo=a(780879),er=a(949044),es=a(974705),ec=a(288910),ed=a(32228);function eu({auxData:e}){(0,r.useEffect)(()=>{(0,o.Z)("MobileVisualSearchOneBar","/app/www/VisualSearch/mobile/Feed/MobileVisualSearchOneBar.tsx")},[]);let{onCarouselTouchStart:t,onCarouselTouchMove:a,onCarouselTouchEnd:i}=el(),l=e?.metadata?.one_bar_modules,n=(0,er.Z)(es.Z,!0)(l);return n&&n.length>0?(0,W.jsx)(ec.v,{children:(0,W.jsx)(eo.f,{children:(0,W.jsx)(u.xu,{marginBottom:4,onTouchEnd:i,onTouchMove:a,onTouchStart:t,paddingX:2,children:(0,W.jsx)(u.iP,{onTap:({event:e})=>e.stopPropagation(),children:(0,W.jsx)(ed.Z,{oneBarModules:n})})})})}):null}function ep({auxData:e,isShopTheLookFeed:t,pinId:a,searchResourceOptions:i,surfaceType:l,viewParameter:n,viewType:s}){(0,r.useEffect)(()=>{(0,o.Z)("MobileVisualSearchFeed","/app/www/VisualSearch/mobile/Feed/MobileVisualSearchFeed.tsx")},[]);let c=(0,g.Z)(),{auxData:d,data:p,fetchMore:h,isAtEnd:y,isFetching:f,isLoaded:_}=(0,m.Z)({name:"VisualSearchFlashlightUnifiedResource",options:i}),x=(p?.results||[]).flatMap(e=>"pin"===e.type?e:[]),w=c._('Image search', 'mobileFlashlight.organicFeedTitle', 'Search results from the image.'),b=c._('Shop the look', 'mobileFlashlight.shopTheLookFeedTitle', 'Shop the look for similar products from the cropped image.');return _?(0,W.jsxs)(r.Fragment,{children:[(0,W.jsx)(eu,{auxData:d}),(0,W.jsx)(en,{data:p,pinId:a,surfaceType:l,viewParameter:n,viewType:s}),(0,W.jsx)(u.xu,{"data-test-id":t?"shop-the-look-feed-title":"organic-feed-title",marginBottom:3,paddingX:q.S2,children:(0,W.jsx)(u.X6,{accessibilityLevel:2,size:"400",children:t?b:w})}),(0,W.jsx)(u.xu,{color:"default",dangerouslySetInlineStyle:{__style:{touchAction:"pan-y"}},"data-test-id":t?"shop-the-look-feed":"organic-feed",paddingX:X.D6,children:(0,W.jsx)(et.Z,{feedItems:x,feedKey:(0,ee.J)("VisualSearchFlashlightUnifiedResource",i)??"",pagination:{loadNext:h||(()=>void 0),hasNext:!y,isLoadingNext:f||!1,refetch:()=>void 0},renderFeedItem:(a,i)=>(0,W.jsx)(Y.default,{children:(0,W.jsx)(Q.Z,{auxData:e,componentType:0,duploQueryRef:null,pinId:a.id??"",slotIndex:i,trackingParams:a.tracking_params||void 0,trafficSource:t?"shop_feed":void 0,viewParameter:n,viewType:s})})})})]}):(0,W.jsx)(u.xH,{accessibilityLabel:c._('Loading visual search results', 'mobileFlashlightPage.loadingSpinner', 'Spinner for loading the visual search result'),show:!0})}function eh({isShopTheLookFeed:e,searchResourceOptions:t,viewParameter:a,viewType:i}){(0,r.useEffect)(()=>{(0,o.Z)("UnauthMobileVisualSearchFeed","/app/www/VisualSearch/mobile/Feed/UnauthMobileVisualSearchFeed.tsx")},[]);let{data:l,fetchMore:n,isAtEnd:s,isFetching:c}=(0,m.Z)(e?{name:"VisualSearchFlashlightUnifiedResource",options:t}:{name:"VisualLiveSearchResource",options:t});return(0,W.jsx)(u.xu,{color:"default",paddingX:X.D6,children:(0,W.jsx)(et.Z,{feedItems:l?.results??[],feedKey:(0,ee.J)("VisualLiveSearchResource",t)??"",pagination:{loadNext:n||(()=>void 0),hasNext:!s,isLoadingNext:c||!1,refetch:()=>void 0},renderFeedItem:(e,t)=>(0,W.jsx)(Y.default,{children:(0,W.jsx)(Q.Z,{componentType:0,duploQueryRef:null,pinId:e.id??"",slotIndex:t,trackingParams:e.tracking_params,trafficSource:"flashlight",viewParameter:a,viewType:i})})})})}var eg=a(518259),em=a(326113);function ey(){return Math.min(em.g6,window.innerWidth)}function ef(e,t){return Math.floor(ey()/t*e)}var e_=a(244074),ex=a(976892),ew=a(47239),eb=a(615440),eS=a(743222),ev=a(903098);function ej({pinDominantColor:e,url:t,closeupImageWidth:a,closeupImageHeight:i}){(0,r.useEffect)(()=>{(0,o.Z)("CropperCloseupImage","/app/www/VisualSearch/mobile/CropperCloseupImage.tsx")},[]);let l=(0,g.Z)();return(0,W.jsx)(ev.Z,{alt:l._('Pin image', 'flashlight.cropper.closeupImage', 'Pin closeup image'),color:e,isFlashlightPage:!0,naturalHeight:i,naturalWidth:a,placeholder:t,pwtElementTimingId:"cropper-closeup-image",showSpinner:!1,src:t})}let ek=e=>{(0,r.useEffect)(()=>{(0,o.Z)("CropperHandle","/app/www/VisualSearch/mobile/CropperHandle.tsx")},[]);let{alt:t,src:a,top:i,left:l}=e;return(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{top:i,left:l}},height:24,position:"absolute",width:24,children:(0,W.jsx)(u.Ee,{alt:t,color:"transparent",naturalHeight:24,naturalWidth:24,src:a})})},eT={backgroundColor:"#000000",opacity:"0.4"};function eC({closeupImageUrl:e,closeupImageDims:t,cropArea:{x:a,y:i,w:l,h:n},disableBorder:s,disableHandles:c,handleBackClick:d,onTouchEnd:p,onTouchMove:h,onTouchStart:m,pinDominantColor:y,showBackButton:f,viewParameter:_}){(0,r.useEffect)(()=>{(0,o.Z)("Cropper","/app/www/VisualSearch/mobile/Cropper.tsx")},[]);let x=(0,g.Z)(),{closeupImageWidth:w,closeupImageHeight:b}=t,S=Math.floor(b*i),v=Math.floor(w*a),j=Math.floor(b*n),k=Math.floor(w*l),T=v+k,C=S+j;return(0,W.jsxs)(u.xu,{"data-test-id":"cropper-container",onTouchEnd:p,onTouchMove:h,onTouchStart:m,position:"relative",children:[(0,W.jsx)(ej,{closeupImageHeight:b,closeupImageWidth:w,pinDominantColor:y,url:e??""}),(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:eT},height:S,left:!0,position:"absolute",top:!0,width:"100%"}),(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{...eT,top:S}},height:j,left:!0,position:"absolute",width:v}),(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{...eT,top:S,left:T}},height:j,position:"absolute",right:!0}),(0,W.jsx)(u.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...eT,top:C}},left:!0,position:"absolute",width:"100%"}),!c&&(0,W.jsxs)(u.xu,{"data-test-id":"CropperHandles",children:[(0,W.jsx)(ek,{alt:x._('Top left cropper handle', 'flashlight.cropper.topLeftHandle', 'top left handle for cropping image'),left:v-9,src:eb,top:S-9}),(0,W.jsx)(ek,{alt:x._('Top right cropper handle', 'flashlight.cropper.topRightHandle', 'top right handle for cropping image'),left:T-15,src:eS,top:S-9}),(0,W.jsx)(ek,{alt:x._('Bottom left cropper handle', 'flashlight.cropper.bottomLeftHandle', 'bottom left handle for cropping image'),left:v-9,src:ex,top:C-15}),(0,W.jsx)(ek,{alt:x._('Bottom right cropper handle', 'flashlight.Cropper.BottomLeftHandle', 'bottom right handle for cropping image'),left:T-15,src:ew,top:C-15})]}),(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{top:S-2,left:v-2,border:s?void 0:"2px solid #ffffff"}},"data-test-id":"CroppedArea",height:j+4,position:"absolute",rounding:2,width:k+4}),f&&(0,W.jsx)(eg.ZP,{handleBackClick:d,viewParameter:_,viewType:427})]})}var eI=a(556872);function eF({auxData:e,onClick:t,shouldLogDotRender:a,showNoHalo:i,style:l,viewParameter:n,x:s,y:c}){(0,r.useEffect)(()=>{(0,o.Z)("Dot","/app/www/VisualSearch/mobile/Dot.tsx")},[]);let d=(0,g.Z)(),p=(0,R.Z)();return(0,I.Z)(()=>{a&&p({aux_data:e,element:1221,event_type:120,view_parameter:n,view_type:72})}),(0,W.jsx)("div",{"aria-label":d._('Select a specific item on image', 'dot.accessibilityLabel', 'Accessibility label for <Dot /> component'),"data-test-id":"dot",onClick:t,onKeyPress:t,role:"button",style:{position:"absolute",top:c-16,left:s-16,outline:"none",...l},tabIndex:0,children:(0,W.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:i?void 0:"rgba(0, 0, 0, 0.1)",width:32,height:32,border:"none",borderRadius:32,cursor:t?"pointer":"default"}},children:(0,W.jsx)(u.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{boxShadow:"none",width:16,height:16,border:"none",borderRadius:16,top:8,left:8}},display:"flex",justifyContent:"center",padding:0,position:"absolute"})})})}var eP=a(450808);let eZ="flashlightDotPop",eE=(0,eP.Ll)([`
  ${eZ} {
      0% {
          opacity: 0;
          transform: scale(0);
      }

      100% {
          opacity: 1;
          transform: scale(1);
      }
  }
`,`labelReveal {
    0% {
      transform: scale(0, 1)
    }

    100% {
      transform: scale(1, 1)
    }
  }
`]);function eA({closeupImageTop:e,imageHeight:t,imageTop:a,imageWidth:i,onDotTap:l,pinId:n,pinImageSignature:s,setCropArea:c,shouldLogDotRender:d,showNoHalo:u,viewParameter:p,visualObjects:h,visualObjectToHide:g}){(0,r.useEffect)(()=>{(0,o.Z)("Dots","/app/www/VisualSearch/mobile/Dots.tsx")},[]);let m=(0,R.Z)();return(0,W.jsxs)(r.Fragment,{children:[(0,W.jsx)(S.Z,{unsafeCSS:eE}),h.map((o,r)=>{if(r===g)return null;let{x:y=0,y:f=0,w:_=0,h:x=0}=o,w={x:y,y:f,h:x,w:_},b=(0,eI.Z)({cropArea:{x:y,y:f,w:_,h:x},scaledWidth:i,scaledHeight:t}),S=Math.floor(b.x+b.w/2),v=Math.floor(b.y+a+b.h/2),j=(e=>{let t=parseFloat((.1*e).toFixed(2));return{animation:`${eZ} 0.3s ease-out ${t}s both`}})(r),k={pin_id:n,image_signature:s,visual_objects:JSON.stringify([w]),commerce_data:JSON.stringify({entrypoint:"flashlight",pin_is_stela:"false"})};return(0,W.jsx)(eF,{auxData:k,onClick:function(){m({aux_data:k,element:1221,event_type:102,view_parameter:p,view_type:72}),l({cropArea:w,cropSource:4,visualObjects:h}),c?.(w)},shouldLogDotRender:d,showNoHalo:u,style:j,viewParameter:p,x:S,y:v-e},JSON.stringify(w))})]})}function eM({closeupImageUrl:e,closeupImageDims:t,cropArea:a,handleBackClick:i,handleChangeCloseupImageTop:l,handleCropperChange:n,headerHeight:c,pinDominantColor:d,pinId:p,pinImageSignature:h,showBackButton:g,viewParameter:m,visualObjects:y,visualObjectToHide:f}){(0,r.useEffect)(()=>{(0,o.Z)("VisualSearch","/app/www/VisualSearch/mobile/VisualSearch.tsx")},[]);let _=(0,R.Z)(),{isAuth:x}=(0,s.Z)(),w=(0,r.useRef)(null),[b,S]=(0,r.useState)(0),[v,j]=(0,r.useState)(0),[k,T]=(0,r.useState)(10),[C,I]=(0,r.useState)(a),{current:F}=(0,e_.Z)(),{x:P,y:Z,w:E,h:A}=C,{closeupImageTop:M,closeupImageMinTop:D,closeupImageWidth:L,closeupImageHeight:H,minCropperWidthRatio:z,minCropperHeightRatio:O}=t,K=c||0;return(0,W.jsx)(u.kC,{justifyContent:"center",width:"100vw",children:(0,W.jsxs)(u.xu,{ref:w,dangerouslySetInlineStyle:{__style:{top:M,touchAction:"none"}},maxWidth:em.g6,overflow:"hidden",position:"fixed",width:"100%",children:[(0,W.jsx)(eC,{closeupImageDims:t,closeupImageUrl:e,cropArea:C,handleBackClick:i,onTouchEnd:()=>{[10,0].includes(k)||(_({event_type:1===k?7603:7604,view_parameter:m,view_type:72}),n({cropArea:C,cropSource:6,visualObjects:y}))},onTouchMove:e=>{let{clientX:t,clientY:a}=e.touches[0];if(S(t),j(a),10===k&&T(((e,t)=>{let a=t-M,i=e-(w.current?w.current.getBoundingClientRect().left:0),l=H*Z,n=H*(Z+A),o=L*P,r=L*(E+P);if(a>l+12&&a<n-12&&i>o+12&&i<r-12)return 1;if(i<=o+12&&i>=o-12&&a>=l+15&&a<=n-15)return 2;if(i<=r+12&&i>=r-12&&a>=l+15&&a<=n-15)return 3;if(i<=r-15&&i>=o+15&&a>=l-12&&a<=l+12)return 4;if(i<=r-15&&i>=o+15&&a>=n-12&&a<=n+12)return 5;if(i<=o-9+24&&i>=o-12&&a>=l-12&&a<=l+24-9)return 6;if(i<=r+12&&i>=r-15&&a>=l-12&&a<=l+24-9)return 7;else if(i<=o-9+24&&i>=o-12&&a>=n-15&&a<=n+12)return 8;else if(i<=r+12&&i>=r-15&&a>=n-15&&a<=n+12)return 9;else return 0})(t,a)),null!=z&&null!=O&&null!=D){let e=a-v,i=(t-b)/L,n=e/H,o=Math.min(P+E-z,Math.max(0,P+i)),r=E+(P-o),s=Math.min(Z+A-O,Math.max(0,Z+n)),c=A+(Z-s),d=Math.min(1-P,Math.max(z,E+i)),u=Math.min(1-Z,Math.max(O,A+n));switch(k){case 0:l(Math.floor(Math.max(D,Math.min(K,M+e))));break;case 1:I(e=>({...e,x:Math.max(0,Math.min(1-E,P+i)),y:Math.max(0,Math.min(1-A,Z+n))}));break;case 2:I(e=>({...e,x:o,w:r}));break;case 3:I(e=>({...e,w:d}));break;case 4:I(e=>({...e,y:s,h:c}));break;case 5:I(e=>({...e,h:u}));break;case 6:I({x:o,w:r,y:s,h:c});break;case 7:I(e=>({...e,w:d,y:s,h:c}));break;case 8:I(e=>({...e,h:u,x:o,w:r}));break;case 9:I(e=>({...e,h:u,w:d}))}}},onTouchStart:e=>{let{clientX:t,clientY:a}=e.touches[0];S(t),j(a),T(10)},pinDominantColor:d,showBackButton:g,viewParameter:m}),!!y.length&&0!==H&&0!==L&&(0,W.jsx)(u.xu,{"data-test-id":"FlashlightDots",children:(0,W.jsx)(eA,{closeupImageTop:M,imageHeight:H,imageTop:M,imageWidth:L,onDotTap:n,pinId:p,pinImageSignature:h,setCropArea:I,shouldLogDotRender:!F,showNoHalo:x,viewParameter:m,visualObjects:y,visualObjectToHide:f})})]})})}let eD=`
  html, body {
    overscroll-behavior: none;
  }
`,eR=(void 0!==i||(i=a(272636)).hash&&"a4c8c4488bd813d69ca9e96072e3d2d7"!==i.hash&&console.error("The definition of 'MobileFlashlightPage_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function eL({pinKey:e}){(0,r.useEffect)(()=>{(0,o.Z)("MobileFlashlightPage","/app/www/VisualSearch/mobile/MobileFlashlightPage.tsx")},[]);let t=(0,g.Z)(),a=(0,_.I0)(),i=(0,x.s0)(),{previous:l}=(0,b.ou)(),n=(0,x.TH)(),{isAuth:d}=(0,s.Z)(),{width:h}=(0,w.Z)()||{},m=(0,c.ZP)(),y=(0,p.Z)(eR,e),{checkExperiment:f}=(0,j.Z)(),R=d&&f("mweb_onebar_hybrid_search",{dangerouslySkipActivation:!0}).anyEnabled,L=(0,C.mB)(n.search),{cropSource:H,filters:z,hybrid_search_param:O,journey_depth:K,search_query:N,source_module_id:V,x:B,y:U,h:G,w:$,surfaceType:X,requestParams:Y}=L,Q=X||"flashlight",ee=!d&&(0,T.x9)(m)||void 0,[et,ea]=(0,r.useState)(()=>{var e,t,a;let i,l,n=function({headerHeight:e,pinImageHeight:t,pinImageWidth:a}){let i=0,l=0,n=0;return t&&a&&(i=ey(),l=ef(t,a),n=Math.min(Math.floor(q.pV*window.innerHeight),ef(t,a))),{closeupImageWidth:i,closeupImageHeight:l,closeupImageMinTop:n-l,closeupImageTop:e||0,minCropperWidthRatio:i?q.xZ/i:0,minCropperHeightRatio:l?q.xZ/l:0,modalTop:n}}({headerHeight:ee,pinImageHeight:y.imageSpec_736x?.height,pinImageWidth:y.imageSpec_736x?.width}),{closeupImageHeight:o,modalTop:r}=n,s=(e=Number(G),t=Number(U),a=ee||0,i=e?Number(e):q.R$,l=t?Number(t):q.zg,o>0&&r>0&&(e||(i=(r-2*r*q.zg-a)/o),t||(l=r*q.zg/o)),{h:i,y:l});return{closeupImageDims:n,x:B?Number(B):q.zg,w:$?Number($):1-2*q.zg,y:s.y,h:s.h}}),[ei,el]=(0,r.useState)(()=>(0,P.Z)(Number(H))||(B&&U&&G&&$?6:5)),en={x:et.x,y:et.y,w:et.w,h:et.h},eo="stl"===Q&&4===ei,er=function({cropSource:e,surfaceType:t,isProductPage:a,queryEntrypoint:i}){return i||("stl"===t&&4===e?"shop_the_look_module":a?"feed_module":null)}({cropSource:ei,isProductPage:!1,surfaceType:Q,queryEntrypoint:L.entrypoint}),es={pin_id:y?.entityId,crop:en,crop_source:ei,is_shopping:eo,entry_source:eo?"shopping":"flashlight",entrypoint:er,filters:z,hybrid_search_param:O,journey_depth:parseInt(K,10)||void 0,search_query:N,source_module_id:V},ec=(y.visualObjects??[]).filter(e=>e.isStela).map(E.Z),[ed,eu]=(0,r.useState)((0,F.Z)(ec,en)),{isCropAreaOnDotArea:em,indexToHide:e_}=ed,{closeupImageWidth:ex,modalTop:ew}=et.closeupImageDims,eb=y?.imageSpec_736x?.url??"",eS=!h||h-q._z<ex&&d,ev=!eS&&d,ej=d?R?0:q._z:ee,ek=t._('Visual search', 'Visual search results', 'Visual search results'),{auxData:eT,viewType:eC,viewParameter:eI}=function({cropSource:e,isAuth:t,isCropAreaOnDotArea:a,isProductPage:i,surfaceType:l}){let n=t||"stl"===l,o=4===e||a,r=i?"product":"stl"===l?o?"product":"organic":t&&o?"unified":"organic";return{auxData:(()=>{let e=e=>({commerce_data:JSON.stringify({is_product_only_feed:e})});return"product"===r?e(!0):"unified"===r||n?e(!1):void 0})(),viewType:"product"===r?427:72,viewParameter:"organic"===r?3050:3462}}({cropSource:ei,isAuth:d,isCropAreaOnDotArea:em,isProductPage:!1,surfaceType:Q}),eF=e=>a({type:"SET_FLASHLIGHT_CROP_SOURCE",payload:{cropSource:e}});function eP(){if(0===l.length)return void i(`/pin/${y.entityId}/`,{replace:!0});i(-1)}return((0,I.Z)(()=>{eF(ei)}),0===ew)?null:(0,W.jsxs)(r.Fragment,{children:[(0,W.jsx)(S.Z,{unsafeCSS:eD}),(0,W.jsx)(A.Z,{auxData:eT,viewParameter:eI,viewType:eC,children:(0,W.jsx)(k.Z,{view:eC,children:(0,W.jsxs)(v.default,{hasFixedHeader:!0,hasGutter:!1,children:[(0,W.jsx)(M.Z,{text:t._('Visual Search Page', 'flashlight.accessibilityhiddenheading.fullpage', 'accessibility label for flashlight page')}),(0,W.jsx)(u.xu,{color:"dark",height:"100vh",width:"100vw"}),(0,W.jsx)(eM,{closeupImageDims:et.closeupImageDims,closeupImageUrl:eb,cropArea:en,handleBackClick:eP,handleChangeCloseupImageTop:function(e){ea(t=>({...t,closeupImageDims:{...t.closeupImageDims,closeupImageTop:e}}))},handleCropperChange:function({cropArea:e,cropSource:t,visualObjects:l}){let n;eF(t),n=y.entityId,a((0,D.By)(n)),eu((0,F.Z)(l,e)),el(t),ea(t=>({...t,...e})),i((0,Z.Z)({cropArea:e,cropSource:t,isProductPage:!1,pinId:y.entityId,requestParams:Y,surfaceType:Q}),{replace:!0})},headerHeight:ee,pinDominantColor:y.dominantColor||"#efefef",pinId:y.entityId,pinImageSignature:y.imageSignature,showBackButton:eS,viewParameter:eI,visualObjects:ec,visualObjectToHide:e_}),ev&&(0,W.jsx)(eg.ZP,{handleBackClick:eP,viewParameter:eI,viewType:eC}),(0,W.jsx)(J,{canMoveModal:!0,cropSource:ei,entryPoint:"flashlight",headerHeight:ee,heading:ek,isOpen:!0,location:n,maxDistanceFromTop:ew||0,minDistanceFromTop:ej,mobileAccessibilityCloseIconLabel:t._('Close visual search results', 'close visual search results and go back to pin', 'close visual search results and go back to pin'),mobileHideCloseIcon:d,noBorder:!0,noDivider:!0,noMaskOnBackground:!0,onDismiss:eP,pinId:y.entityId,shouldSnapToEnds:!0,showHandle:d,snapToEndThreshold:.3,viewParameter:eI,viewType:eC,children:d?(0,W.jsx)(ep,{auxData:eT,isShopTheLookFeed:eo,pinId:y.entityId,searchResourceOptions:es,surfaceType:Q,viewParameter:eI,viewType:eC}):(0,W.jsx)(eh,{isShopTheLookFeed:eo,searchResourceOptions:es,viewParameter:eI,viewType:eC})})]})})})]})}var eH=a(430635);let ez=(void 0!==l||(l=a(807352)).hash&&"df8cf9d2521b1a82156cc4ecd7b04884"!==l.hash&&console.error("The definition of 'MobileFlashlightPageFetchData_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),eO=(void 0!==n||(n=a(345463)).hash&&"a0953a7ea15ce447a2452bbeca8586ba"!==n.hash&&console.error("The definition of 'MobileFlashlightPageFetchDataPinQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function eK(){let e=(0,eH.Z)(),{pinId:t}=(0,y.Z)(e.params.id||""),a=(0,h.Z)({strategy:"Legacy",query:eO,variables:{pinId:t},useGetLegacyData:({pinId:e})=>{let{data:t}=(0,m.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),a=(0,f.S6)()(e);return t??a}}),i=a?.v3GetPinQuery?.__typename==="V3GetPin"?a.v3GetPinQuery.data:null,l=(0,p.Z)(ez,i);return l?(0,W.jsx)(eL,{pinKey:l}):null}function eN(){(0,r.useEffect)(()=>{(0,o.Z)("MobileFlashlightPageFetchData","/app/www/VisualSearch/mobile/MobileFlashlightPageFetchData.tsx")},[]);let e=(0,g.Z)();return(0,W.jsx)(r.Suspense,{fallback:(0,W.jsx)(u.xH,{accessibilityLabel:e._('Loading Pin data', 'mobileFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0}),children:(0,W.jsx)(eK,{})})}var eV=a(874912);let eB=function(){(0,r.useEffect)(()=>{(0,o.Z)("VisualSearchPage","/app/www/pages/VisualSearchPage.tsx")},[]);let e=(0,c.HG)(),t=(0,s.Z)();return e?t.isAuth?(0,W.jsx)(d.Z,{}):(0,W.jsx)(eV.Z,{}):(0,W.jsx)(eN,{})}},113481:function(e,t,a){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||[]).push(["www/pin/[id]/visual-search",function(){return a(674874).Z}])},976892:function(e){e.exports="https://s.pinimg.com/webapp/handle_bottom_left-4b5805a7.svg"},47239:function(e){e.exports="https://s.pinimg.com/webapp/handle_bottom_right-5d5443d0.svg"},615440:function(e){e.exports="https://s.pinimg.com/webapp/handle_top_left-194e8c4e.svg"},743222:function(e){e.exports="https://s.pinimg.com/webapp/handle_top_right-0b7d60a7.svg"}},function(e){e.O(0,["1305","15583","25418","33913","39176","39864","50804","51226","58967","66758","66839","67243","70275","75688","7915","9094","92911","95291","98283"],function(){return e(e.s=113481)}),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/visual-search-1f3e5582162eb641.mjs.map